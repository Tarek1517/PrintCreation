import{r as i,o as R,c as n,b as u,i as y,e as t,w as b,v,k as B,j as I,H as c,F as L,g as _,a,t as N,J as T,f as D}from"./app-BHs_qdqJ.js";import{S as P}from"./SummernoteEditor-BI4W7rFX.js";import{u as E}from"./useAxios-CvYkLGhC.js";import{i as F}from"./index-DF90ylPP.js";const O={class:"shadow-lg rounded-lg p-4 max-w-5xl mx-auto"},$={class:"flex items-center flex-wrap"},M={class:"w-1/2 pr-2"},q={class:"w-full"},A={class:"w-1/2 pl-2"},H={class:"w-full"},J={class:"flex items-start py-1"},z={class:"flex items-center justify-between w-full"},G={class:"me-1 flex items-center gap-2"},K=["src"],Q={class:"mb-25"},W={key:1,class:"text-primary"},X={class:"w-1/2 pr-2 pt-2"},Y={class:"w-full"},Z={class:"flex items-center my-10"},ee={class:"w-1/3 pr-2"},te={class:"w-full"},se={class:"border border-common border-dashed p-4 rounded-2xl flex items-center justify-center w-full h-52 cursor-pointer"},oe=["src"],le={key:1,class:"flex flex-col items-center justify-center gap-2"},ae={class:"w-2/3 pl-2"},ne={class:"w-full"},re={for:"category-banner",class:"border border-common border-dashed p-4 rounded-2xl flex items-center justify-center w-full h-52 cursor-pointer"},de=["src"],ie={key:1,class:"flex flex-col items-center justify-center gap-2"},ue={class:"w-full mb-4"},ce={class:"w-full"},me={class:"editor_data"},pe={class:"mt-5"},xe={__name:"Edit",setup(fe){const{error:be,loading:x,sendRequest:m}=E(),p=T(),w=D(),f=i(null),h=async()=>{const o=await m({method:"get",url:"/v1/parent-category"});f.value=o==null?void 0:o.data},C=async()=>{var e;const o=await m({method:"get",url:`/v1/category/${(e=p==null?void 0:p.params)==null?void 0:e.id}`});o&&(s.value.id=o.data.id,s.value.name=o.data.name,s.value.parent_id=o.data.parent_id,s.value.order_number=o.data.order_number,s.value.short_description=o.data.short_description,s.value.description=o.data.description,r.value=o.data.icon,d.value=o.data.banner)},r=i(null),d=i(null),s=i({id:null,name:null,parent_id:0,icon:null,banner:null,order_number:null,short_description:null,description:null}),k=o=>{const e=o.target.files[0];s.value.banner=e,d.value=URL.createObjectURL(e)},U=o=>{const e=o.target.files[0];s.value.icon=e,r.value=URL.createObjectURL(e)},V=async o=>{await m({method:"post",url:`/v1/category/${o}`,data:s.value,params:{_method:"PUT"},headers:{"Content-Type":"multipart/form-data"}})&&(F.success("Category Updated Successfully"),setTimeout(()=>{w.push("/category")},2e3))};return R(()=>{h(),C()}),(o,e)=>{const j=_("Loading"),S=_("Select"),g=_("Icon");return a(),n(L,null,[u(j,{value:y(x)},null,8,["value"]),t("div",O,[e[15]||(e[15]=t("h3",{class:"mb-10"},"Create a New Category",-1)),t("div",null,[t("div",$,[t("div",M,[t("div",q,[e[6]||(e[6]=t("label",{for:"name",class:"text-sm block mb-2"},"Category Name",-1)),b(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>s.value.name=l),type:"text",class:"border border-primary rounded-md font-normal text-sm w-full"},null,512),[[v,s.value.name]])])]),t("div",A,[t("div",H,[e[7]||(e[7]=t("label",{for:"name",class:"text-sm block mb-2"},"Parent Category",-1)),f.value?(a(),B(S,{key:0,label:"name",options:f.value,reduce:l=>l.id,modelValue:s.value.parent_id,"onUpdate:modelValue":e[1]||(e[1]=l=>s.value.parent_id=l),searchable:!0},{option:I(l=>[t("li",J,[t("div",z,[t("div",G,[t("img",{src:l==null?void 0:l.icon,class:"w-12 h-12"},null,8,K),t("h6",Q,N(l==null?void 0:l.name),1)])])])]),_:1},8,["options","reduce","modelValue"])):(a(),n("p",W,"Failed To load Parent Category..."))])]),t("div",X,[t("div",Y,[e[8]||(e[8]=t("label",{for:"name",class:"text-sm block mb-2"},"Order Number",-1)),b(t("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>s.value.order_number=l),type:"number",class:"border border-primary rounded-md font-normal text-sm w-full"},null,512),[[v,s.value.order_number]])])])]),t("div",Z,[t("div",ee,[t("div",te,[e[10]||(e[10]=t("label",{for:"category-icon",class:"text-sm block mb-2"},"Category Image",-1)),t("label",se,[r.value?(a(),n("img",{key:0,src:r.value,class:"w-full h-full"},null,8,oe)):c("",!0),r.value?c("",!0):(a(),n("div",le,[u(g,{name:"tabler:cloud-upload",class:"text-common text-5xl opacity-85"}),e[9]||(e[9]=t("span",{class:"text-common font-semibold opacity-85"},"Upload Category Icon",-1))])),t("input",{id:"category-icon",onChange:U,type:"file",hidden:""},null,32)])])]),t("div",ae,[t("div",ne,[e[12]||(e[12]=t("label",{for:"category-banner",class:"text-sm block mb-2"},"Category Banner",-1)),t("label",re,[d.value?(a(),n("img",{key:0,src:d.value,class:"w-full h-full rounded-md"},null,8,de)):c("",!0),d.value?c("",!0):(a(),n("div",ie,[u(g,{name:"tabler:cloud-upload",class:"text-common text-5xl opacity-85"}),e[11]||(e[11]=t("span",{class:"text-common font-semibold opacity-85"},"Upload Category Banner",-1))])),t("input",{id:"category-banner",onChange:k,type:"file",hidden:""},null,32)])])])]),t("div",ue,[e[13]||(e[13]=t("label",{for:"short-description",class:"text-sm block mb-2"},"Short Description",-1)),b(t("textarea",{class:"p-2 w-full focus:outline-none focus:ring-0 focus:border-common rounded ring-0 bg-secondary border border-common shadow-md shadow-common/50 transition-all ease-in-out duration-100","onUpdate:modelValue":e[3]||(e[3]=l=>s.value.short_description=l)},null,512),[[v,s.value.short_description]])]),t("div",ce,[e[14]||(e[14]=t("label",{for:"description",class:"text-sm block mb-2"},"Description",-1)),t("div",me,[u(y(P),{modelValue:s.value.description,"onUpdate:modelValue":e[4]||(e[4]=l=>s.value.description=l)},null,8,["modelValue"])])])]),t("div",pe,[t("button",{class:"bg-common py-2 px-10",onClick:e[5]||(e[5]=l=>V(s.value.id))},"Save Change")])])],64)}}};export{xe as default};
