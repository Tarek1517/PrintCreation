import{r as u,o as z,c as d,b as r,i as U,e,w as n,v as i,k as B,j as I,H as g,F as x,h as C,B as m,g as w,a,t as L,f as Q,J as X}from"./app-BHs_qdqJ.js";import{S as R}from"./SummernoteEditor-BI4W7rFX.js";import{u as Y}from"./useAxios-CvYkLGhC.js";import{i as $}from"./index-DF90ylPP.js";const Z={class:"p-4 rounded-lg shadow-lg"},ee={class:"flex flex-wrap"},te={class:"w-1/2 flex flex-col gap-3 px-2"},le={class:"w-full px-2"},se={class:"w-full flex flex-wrap"},oe={class:"w-1/2 px-2"},ae={class:"w-1/2 px-2"},de={class:"w-1/2 px-2"},re={class:"w-1/2 px-2"},ne={class:"w-full flex items-center space-x-5 px-2"},ie={class:"w-1/2"},ue={class:"flex items-start py-1"},ce={class:"flex items-center justify-between w-full"},me={class:"me-1 flex items-center gap-2"},pe=["src"],ve={class:"mb-25"},_e={class:"w-1/2"},fe={class:"flex items-start py-1"},be={class:"flex items-center justify-between w-full"},ge={class:"me-1 flex items-center gap-2"},xe=["src"],we={class:"mb-25"},ye={class:"w-full px-2"},he={class:"w-full px-2"},ke={class:"flex items-end flex-wrap -mt-4"},Ve={class:"w-4/5 pr-4 mt-4 flex items-center"},Ue=["onUpdate:modelValue"],Ie=["onClick"],Ce={class:"w-1/2 flex flex-col gap-4 px-2"},Pe={class:"flex"},Se={class:"pr-2"},je={for:"cover_image",class:"w-52 h-36 flex items-center justify-center gap-3 p-2 border border-dashed border-common rounded-md text-common cursor-pointer"},Be=["src"],Le={key:1},Re={class:"pl-2"},$e={for:"hover_image",class:"w-52 h-36 flex items-center bg-secondary justify-center gap-3 p-2 border border-dashed border-common rounded-md text-common cursor-pointer"},Ne=["src"],Ae={key:1},Oe={key:0,class:"w-full"},Te={class:"file-upload-container"},De={class:"file-upload-container-wrapper"},Ee={class:"file-upload-container-wrapper__preview"},Fe=["src"],Me=["onClick"],Ge={class:"w-full"},He={class:"p-2 bg-secondary border border-primary rounded-lg"},Je={class:"file-upload-container"},Ke={class:"file-upload-container-wrapper"},qe=["src"],We=["onClick"],ze={class:"file-upload-container-wrapper__add"},Qe={for:"mu-file-input",class:"file-upload-container__add-btn"},Xe={class:"w-full px-2 mb-5"},Ye={class:"editor_data"},Ze={class:"w-full px-2"},et={class:"editor_data"},tt={class:"text-center pt-10"},nt={__name:"Edit",setup(lt){const{loading:N,error:st,sendRequest:c}=Y(),A=Q(),O=X(),y=u(null),h=u(null),T=async()=>{const o=await c({method:"get",url:"/v1/get-all-category-list"});h.value=o==null?void 0:o.data},k=u(null),D=async()=>{const o=await c({method:"get",url:"/v1/get-all-brand-list"});k.value=o==null?void 0:o.data},P=async()=>{const o=await c({method:"get",url:`/v1/product/${O.params.slug}`});s.value.id=o.data.id,s.value.title=o.data.title,s.value.price=o.data.price,s.value.category_id=o.data.category_id,s.value.brand_id=o.data.brand_id,s.value.video_url=o.data.video_url,s.value.sku=o.data.sku,s.value.discount_price=o.data.discount_price,s.value.stock=o.data.stock,s.value.product_info=o.data.product_info,s.value.specification=o.data.specification,s.value.key_features=o.data.key_features,y.value=o.data.images,p.value=o.data.cover_image,v.value=o.data.hover_image},p=u(null),E=o=>{const t=o.target.files[0];s.value.cover_image=t,p.value=URL.createObjectURL(t)},v=u(null),F=o=>{const t=o.target.files[0];s.value.hover_image=t,v.value=URL.createObjectURL(t)},M=o=>{for(let t=0;t<o.target.files.length;t++)s.value.newImages.push({url:URL.createObjectURL(o.target.files[t]),file:o.target.files[t]})},G=o=>{let t=s.value.images[o];t.url.startsWith("blob:")&&URL.revokeObjectURL(t.url),s.value.newImages.splice(o,1)},s=u({id:null,title:null,price:null,category_id:null,brand_id:null,video_url:null,sku:null,discount_price:null,stock:1,cover_image:null,hover_image:null,product_info:null,specification:null,newImages:[],key_features:[{name:null}]}),H=()=>{s.value.key_features.push({name:null})},J=o=>s.value.key_features.splice(o,1),K=async o=>{var _;const t=await c({method:"post",url:`/v1/product/${o}`,data:s.value,params:{_method:"PUT"},headers:{"Content-Type":"multipart/form-data"}});t!=null&&t.data&&($.success(`${(_=t==null?void 0:t.data)==null?void 0:_.name} Product Addded Succesfully`,{autoclose:1e3}),await A.push("/products"))},q=async o=>{await c({method:"get",url:`/v1/delete-product-image/${o}`})&&($.success("Product Image Deleted Succesfully",{autoclose:1e3}),P())};return z(()=>{P(),T(),D()}),(o,t)=>{var j;const _=w("Loading"),S=w("Select"),f=w("Icon"),W=w("Button");return a(),d(x,null,[r(_,{value:U(N)},null,8,["value"]),e("div",Z,[t[28]||(t[28]=e("h3",{class:"text-sm mb-5"},"Add New Product",-1)),e("div",ee,[e("div",te,[e("div",le,[t[11]||(t[11]=e("label",{for:"title",class:"text-xs mb-1"},"Product Title",-1)),n(e("input",{type:"text",class:"p-2 border border-primary w-full rounded","onUpdate:modelValue":t[0]||(t[0]=l=>s.value.title=l)},null,512),[[i,s.value.title]])]),e("div",se,[e("div",oe,[t[12]||(t[12]=e("label",{for:"price",class:"text-xs mb-1"},"Price",-1)),n(e("input",{type:"text",class:"border border-primary p-2 rounded-md w-full","onUpdate:modelValue":t[1]||(t[1]=l=>s.value.price=l)},null,512),[[i,s.value.price]])]),e("div",ae,[t[13]||(t[13]=e("label",{for:"discount",class:"text-xs mb-1"},"Discount Price",-1)),n(e("input",{type:"text",class:"border border-primary p-2 rounded-md w-full","onUpdate:modelValue":t[2]||(t[2]=l=>s.value.discount_price=l)},null,512),[[i,s.value.discount_price]])]),e("div",de,[t[14]||(t[14]=e("label",{for:"sku",class:"text-xs mb-1"},"Sku",-1)),n(e("input",{type:"text",class:"border border-primary p-2 rounded-md w-full","onUpdate:modelValue":t[3]||(t[3]=l=>s.value.sku=l)},null,512),[[i,s.value.sku]])]),e("div",re,[t[15]||(t[15]=e("label",{for:"discount",class:"text-xs mb-1"},"Stock",-1)),n(e("input",{type:"text",class:"border border-primary p-2 rounded-md w-full","onUpdate:modelValue":t[4]||(t[4]=l=>s.value.stock=l)},null,512),[[i,s.value.stock]])])]),e("div",ne,[e("div",ie,[t[16]||(t[16]=e("label",{for:"category",class:"text-xs mb-1"},"Category",-1)),h.value?(a(),B(S,{key:0,label:"name",options:h.value,reduce:l=>l.id,searchable:!0,modelValue:s.value.category_id,"onUpdate:modelValue":t[5]||(t[5]=l=>s.value.category_id=l),placeholder:"Set Category"},{option:I(l=>[e("li",ue,[e("div",ce,[e("div",me,[e("img",{src:l==null?void 0:l.icon,class:"w-12 h-12"},null,8,pe),e("h6",ve,L(l==null?void 0:l.name),1)])])])]),_:1},8,["options","reduce","modelValue"])):g("",!0)]),e("div",_e,[t[17]||(t[17]=e("label",{for:"category",class:"text-xs mb-1"},"Brand",-1)),k.value?(a(),B(S,{key:0,label:"name",options:k.value,reduce:l=>l.id,searchable:!0,modelValue:s.value.brand_id,"onUpdate:modelValue":t[6]||(t[6]=l=>s.value.brand_id=l),placeholder:"Set Brand"},{option:I(l=>[e("li",fe,[e("div",be,[e("div",ge,[e("img",{src:l==null?void 0:l.logo,class:"w-12 h-12"},null,8,xe),e("h6",we,L(l==null?void 0:l.name),1)])])])]),_:1},8,["options","reduce","modelValue"])):g("",!0)])]),e("div",ye,[t[18]||(t[18]=e("label",{for:"title",class:"text-xs mb-1"},"Video Url (Optional)",-1)),n(e("textarea",{"onUpdate:modelValue":t[7]||(t[7]=l=>s.value.video_url=l),type:"text",class:"p-2 w-full focus:outline-none focus:ring-0 focus:border-common rounded ring-0 bg-secondary border border-common shadow-md shadow-common/50 transition-all ease-in-out duration-100"},null,512),[[i,s.value.video_url]])]),e("div",he,[t[19]||(t[19]=e("label",{for:"key-features",class:"text-xs mb-1 block"},"Key Features",-1)),e("div",ke,[(a(!0),d(x,null,C(s.value.key_features,(l,b)=>(a(),d("div",Ve,[n(e("input",{type:"text",class:"border rounded-md p-2 w-full","onUpdate:modelValue":V=>l.name=V},null,8,Ue),[[i,l.name]]),s.value.key_features.length>1?(a(),d("button",{key:0,onClick:V=>J(b),class:"bg-slate-100 rounded w-8 h-8 flex items-center justify-center -ml-[36px] shadow"},[r(f,{name:"material-symbols:close-rounded",class:"text-common text-2xl"})],8,Ie)):g("",!0)]))),256)),e("button",{class:"w-1/5 text-xs bg-common rounded-md py-3 px-4 text-nowrap",onClick:H},"Add More")])])]),e("div",Ce,[e("div",Pe,[e("div",Se,[t[21]||(t[21]=e("label",{for:"image",class:"text-xs block mb-1"},"Cover Image",-1)),e("label",je,[e("input",{type:"file",id:"cover_image",hidden:"",onChange:E},null,32),p.value?(a(),d("img",{key:0,src:p.value,class:"w-full h-full object-cover"},null,8,Be)):(a(),d("div",Le,t[20]||(t[20]=[e("p",{class:"text-xs"},"Upload Product Cover Image",-1)])))])]),e("div",Re,[t[23]||(t[23]=e("label",{for:"image",class:"text-xs block mb-1"},"Hover Image",-1)),e("label",$e,[e("input",{type:"file",id:"hover_image",hidden:"",onChange:F},null,32),v.value?(a(),d("img",{key:0,src:v.value,class:"w-full h-full object-cover"},null,8,Ne)):(a(),d("div",Ae,t[22]||(t[22]=[e("p",{class:"text-xs"},"Upload Product Hover Image",-1)])))])])]),((j=y.value)==null?void 0:j.length)>0?(a(),d("div",Oe,[e("div",Te,[e("div",De,[(a(!0),d(x,null,C(y.value,l=>(a(),d("div",Ee,[e("img",{src:l.url,class:"file-upload-container-wrapper__preview-item"},null,8,Fe),e("button",{onClick:b=>q(l.id),class:"file-upload-container-wrapper__preview-cancel",type:"button"},[r(f,{name:"material-symbols-light:delete-outline",class:""})],8,Me)]))),256))])])])):g("",!0),e("div",Ge,[e("div",He,[t[24]||(t[24]=e("h4",{class:"mb-3 text-sm"},"Product Images",-1)),t[25]||(t[25]=e("ul",{class:"mb-2"},[e("li",{class:"text-xs"},"999 KB limit."),e("li",{class:"text-xs"},[m("Allowed types: "),e("span",null," JPG"),m(", "),e("span",null,"JPEG"),m(", "),e("span",null,"PNG"),m(".")])],-1)),e("div",Je,[e("div",Ke,[(a(!0),d(x,null,C(s.value.newImages,(l,b)=>(a(),d("div",{class:"file-upload-container-wrapper__preview",key:l.index},[e("img",{src:l.url,class:"file-upload-container-wrapper__preview-item"},null,8,qe),e("button",{onClick:V=>G(b),class:"file-upload-container-wrapper__preview-cancel",type:"button"},[r(f,{name:"material-symbols:close",class:""})],8,We)]))),128)),e("div",ze,[e("label",Qe,[e("span",null,[r(f,{name:"tabler:cloud-upload"})])]),e("input",{onChange:M,id:"mu-file-input",type:"file",accept:"image/*",multiple:"",hidden:""},null,32)])])])])])]),e("div",Xe,[t[26]||(t[26]=e("label",{for:"title",class:"text-sm mb-1"},"Product Info",-1)),e("div",Ye,[r(U(R),{modelValue:s.value.product_info,"onUpdate:modelValue":t[8]||(t[8]=l=>s.value.product_info=l)},null,8,["modelValue"])])]),e("div",Ze,[t[27]||(t[27]=e("label",{for:"title",class:"text-sm mb-1"},"Specifications",-1)),e("div",et,[r(U(R),{modelValue:s.value.specification,"onUpdate:modelValue":t[9]||(t[9]=l=>s.value.specification=l)},null,8,["modelValue"])])])])]),e("div",tt,[r(W,{class:"w-1/2 mx-auto",onClick:t[10]||(t[10]=l=>K(s.value.id))},{default:I(()=>t[29]||(t[29]=[m("Save Product")])),_:1})])],64)}}};export{nt as default};
